--SQLite query for com.apple.routined - Cache.Sqlite ZRTCLLOCATIONMO Table
--Database can be located at /private/var/mobile/Library/Caches/com.apple.routined/Cache.sqlite
--This query has original data and calculated Accuracy and Speeds
--By: Scott Koenig bskoenig3347@gmail.com
--Twitter: @Scott_Kjr
--Reminder to always test and validate!	

SELECT
	ZRTCLLOCATIONMO.Z_PK AS 'zPK',
	DateTime ( ZRTCLLOCATIONMO.ZTIMESTAMP + 978307200, 'UNIXEPOCH' ) AS 'zTimestamp in UTC',
	DateTime ( ZRTCLLOCATIONMO.ZTIMESTAMP + 978307200, 'UNIXEPOCH', 'localtime' ) AS 'zTimestamp Local Time',
	ZRTCLLOCATIONMO.ZLATITUDE AS 'zLatitude',
	ZRTCLLOCATIONMO.ZLONGITUDE AS 'zLongitude',
	ZRTCLLOCATIONMO.ZHORIZONTALACCURACY * 3.28084 AS ' Horiz Accuracy_Feet',
	ZRTCLLOCATIONMO.ZSPEED * 2.23694 AS ' Speed_Miles Per Hour',
CASE
		ZRTCLLOCATIONMO.ZCOURSE 
		WHEN - 1 THEN
		'-1' ELSE ZRTCLLOCATIONMO.ZCOURSE
	END AS 'zCourse',
CASE
		ZRTCLLOCATIONMO.ZSPEED 
		WHEN - 1 THEN
		'-1' ELSE ZRTCLLOCATIONMO.ZSPEED
	END AS ' zSpeed_Meters per Sec',
	ZRTCLLOCATIONMO.ZHORIZONTALACCURACY AS ' zHoriz Accuracy_Meters',
CASE
		ZRTCLLOCATIONMO.ZVERTICALACCURACY 
		WHEN - 1 THEN
		'-1' ELSE ZRTCLLOCATIONMO.ZVERTICALACCURACY
	END AS 'Vertical Accuracy in Meters',
CASE	
		ZRTCLLOCATIONMO.ZTYPE
		WHEN 1 THEN
		'Type1-Vaild-Speed-StillTesting-1' 
		WHEN 4 THEN
		'Type4-Invalid_Speed-StillTesting-4' 
		WHEN 6 THEN
		'Type6-zHorizAcc_35m-10445m-StillTesting-6'
		WHEN 7 THEN
		'Type7-zHorizAcc_39m-46m-StillTesting-7'
		WHEN 9 THEN
		'Type9-zHorizAcc_200m-StillTesting-9' ELSE 'Unknown-New-Value!: '||ZRTCLLOCATIONMO.ZTYPE||''
	END AS 'zType'	
FROM
	ZRTCLLOCATIONMO
--WHERE ZRTCLLOCATIONMO.ZTIMESTAMP BETWEEN '#####' AND '#####'
--WHERE ZRTCLLOCATIONMO.ZHORIZONTALACCURACY < 65
--WHERE ZRTCLLOCATIONMO.ZHORIZONTALACCURACY < 65 AND ZRTCLLOCATIONMO.ZTIMESTAMP BETWEEN '#####' AND '#####'
ORDER BY
	ZRTCLLOCATIONMO.ZTIMESTAMP
